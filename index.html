<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenLunaMedChain System - Complete Documentation</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.7;
            color: #1a1a1a;
            background: #ffffff;
            padding: 60px 40px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 60px;
            padding-bottom: 40px;
            border-bottom: 3px solid #2563eb;
        }
        
        .header h1 {
            font-size: 42px;
            font-weight: 700;
            color: #1e40af;
            margin-bottom: 12px;
            letter-spacing: -0.5px;
        }
        
        .header .subtitle {
            font-size: 18px;
            color: #64748b;
            font-weight: 400;
        }
        
        .toc {
            background: #f8fafc;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 50px;
            border-left: 4px solid #2563eb;
        }
        
        .toc h2 {
            font-size: 24px;
            color: #1e40af;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        
        .toc li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .toc li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #2563eb;
            font-weight: 600;
        }
        
        .toc a {
            color: #475569;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .toc a:hover {
            color: #2563eb;
        }
        
        .section {
            margin-bottom: 50px;
            page-break-inside: avoid;
        }
        
        .section-title {
            font-size: 32px;
            font-weight: 700;
            color: #1e40af;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .section-number {
            background: #2563eb;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 700;
        }
        
        .subsection {
            margin-bottom: 35px;
        }
        
        .subsection-title {
            font-size: 22px;
            font-weight: 600;
            color: #334155;
            margin-bottom: 15px;
            padding-left: 15px;
            border-left: 3px solid #60a5fa;
        }
        
        .steps {
            background: #ffffff;
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            margin-bottom: 20px;
        }
        
        .steps ol {
            padding-left: 25px;
            margin: 0;
        }
        
        .steps li {
            margin-bottom: 12px;
            color: #475569;
            line-height: 1.7;
        }
        
        .steps ul {
            list-style: none;
            padding-left: 20px;
            margin-top: 8px;
        }
        
        .steps ul li:before {
            content: "‚Ä¢";
            color: #2563eb;
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }
        
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .tech-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px;
            border-radius: 12px;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .tech-card h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tech-card ul {
            list-style: none;
            padding: 0;
        }
        
        .tech-card li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .tech-card li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        
        .info-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .info-box strong {
            color: #92400e;
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .troubleshooting-item {
            background: #fff;
            padding: 18px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .troubleshooting-item strong {
            color: #1e40af;
            display: block;
            margin-bottom: 6px;
            font-size: 16px;
        }
        
        .env-vars {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.8;
            overflow-x: auto;
        }
        
        .env-vars code {
            color: #60a5fa;
        }
        
        @media print {
            body {
                padding: 20px;
            }
            .section {
                page-break-inside: avoid;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 30px 20px;
            }
            .header h1 {
                font-size: 32px;
            }
            .section-title {
                font-size: 24px;
            }
            .tech-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>GenLunaMedChain System</h1>
        <p class="subtitle">Complete Documentation & User Guide</p>
    </div>

    <div class="toc">
        <h2>üìã Table of Contents</h2>
        <ul>
            <li><a href="#tech-stack">Technology Stack</a></li>
            <li><a href="#deployment">Deployment and Environment</a></li>
            <li><a href="#getting-started">Getting Started</a></li>
            <li><a href="#medicine">Medicine Management</a></li>
            <li><a href="#stock">Stock Management</a></li>
            <li><a href="#consultation">Consultation Booking</a></li>
            <li><a href="#residents">Resident Management</a></li>
            <li><a href="#user-role">User Role Management</a></li>
            <li><a href="#barangay">Barangay-Specific Features</a></li>
            <li><a href="#blockchain">Blockchain Integration</a></li>
            <li><a href="#reports">Reports and Analytics</a></li>
            <li><a href="#receipts">Receipts and Financial Records</a></li>
            <li><a href="#audit">Audit Logs</a></li>
            <li><a href="#providers">Provider Profiles</a></li>
            <li><a href="#statistics">Resident Statistics</a></li>
            <li><a href="#verification">Verification Tools</a></li>
            <li><a href="#security">Security and Access Control</a></li>
            <li><a href="#troubleshooting">Troubleshooting</a></li>
            <li><a href="#deep-dive">System Deep Dive</a></li>
        </ul>
    </div>

    <div class="section" id="tech-stack">
        <h2 class="section-title">
            <span class="section-number">1</span>
            Technology Stack
        </h2>
        
        <div class="tech-grid">
            <div class="tech-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <h3>üé® Frontend</h3>
                <ul>
                    <li>React.js (UI Library)</li>
                    <li>Vite (Build Tool)</li>
                    <li>Tailwind CSS (Styling)</li>
                    <li>React Router (Navigation)</li>
                    <li>Axios (HTTP Client)</li>
                    <li>Chart.js + react-chartjs-2</li>
                    <li>lucide-react (Icons)</li>
                    <li>jsPDF (PDF Generation)</li>
                    <li>@thirdweb-dev/react</li>
                    <li>ethers.js (Blockchain)</li>
                    <li>MetaMask (Wallet)</li>
                </ul>
            </div>
            
            <div class="tech-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <h3>‚öôÔ∏è Backend</h3>
                <ul>
                    <li>Node.js</li>
                    <li>Express.js (API Framework)</li>
                    <li>Prisma ORM</li>
                    <li>Nodemailer (Email/SMTP)</li>
                    <li>JWT Authentication</li>
                    <li>PostgreSQL Database</li>
                </ul>
            </div>
            
            <div class="tech-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <h3>üóÑÔ∏è Database</h3>
                <ul>
                    <li>PostgreSQL</li>
                    <li>Supabase / Neon Hosting</li>
                    <li>Prisma Migrations</li>
                    <li>Serverless Architecture</li>
                </ul>
            </div>
            
            <div class="tech-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                <h3>‚õìÔ∏è Blockchain</h3>
                <ul>
                    <li>Solidity Smart Contracts</li>
                    <li>MedicineInventory.sol</li>
                    <li>Hardhat (Dev Environment)</li>
                    <li>OpenZeppelin Libraries</li>
                    <li>Thirdweb CLI/Scripts</li>
                    <li>Polygon Mumbai/Amoy Testnet</li>
                </ul>
            </div>
            
            <div class="tech-card" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                <h3>üöÄ DevOps & Hosting</h3>
                <ul>
                    <li>Frontend: Netlify</li>
                    <li>Backend: Render.com</li>
                    <li>GitHub (Version Control)</li>
                    <li>Docker Support</li>
                    <li>render.yaml, netlify.toml</li>
                </ul>
            </div>
            
            <div class="tech-card" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                <h3>üîß Tools & Services</h3>
                <ul>
                    <li>GitHub Collaboration</li>
                    <li>eClinicalWorks API</li>
                    <li>dev-workflow.md</li>
                    <li>setup-dev.sh</li>
                    <li>deploy-all.sh</li>
                </ul>
            </div>
    </div>
    </div>

    <div class="section" id="deep-dive">
        <h2 class="section-title">
            <span class="section-number">2</span>
            System Deep Dive
        </h2>

        <div class="subsection">
            <h3 class="subsection-title">Backend Overview</h3>
            <div class="steps">
                <ul>
                    <li>Express.js API server registers routes in <code>backend/server.js</code> and attaches <code>optionalAuth</code> for wallet-aware requests</li>
                    <li>Health endpoint at <code>GET /</code> returns status and timestamp</li>
                    <li>Core routes: <code>/residents</code>, <code>/medicines</code>, <code>/stocks</code>, <code>/releases</code>, <code>/removals</code>, <code>/transactions</code>, <code>/audit</code>, <code>/verify</code>, <code>/users</code>, <code>/blockchain</code>, <code>/schedule</code>, <code>/consultations</code>, <code>/provider-profiles</code></li>
                    <li>Authentication uses wallet headers and signature verification where required</li>
                    <li>Barangay-based access control applied via middleware</li>
                </ul>
            </div>
        </div>

        <div class="subsection">
            <h3 class="subsection-title">API Endpoints</h3>
            <div class="steps">
                <ul>
                    <li><code>/residents</code> ‚Äì list, detail, create, update, deactivate, with rich filters and pagination</li>
                    <li><code>/medicines</code> ‚Äì CRUD, stock linkage, barangay scoping, blockchain hash storage</li>
                    <li><code>/stocks</code> and <code>/stock-transactions</code> ‚Äì batch numbers, quantities, transaction logs</li>
                    <li><code>/releases</code> ‚Äì issue medicines to residents, receipt generation, on-chain hashing</li>
                    <li><code>/removals</code> ‚Äì record expiries/damages/losses with audit and blockchain proof</li>
                    <li><code>/consultations</code> ‚Äì booking, assignment, status flow, statistics</li>
                    <li><code>/provider-profiles</code> ‚Äì provider info, availability, specializations</li>
                    <li><code>/schedule</code> ‚Äì calendar events per center type and barangay</li>
                    <li><code>/audit</code> ‚Äì audit log querying with scope and date filters</li>
                    <li><code>/verify</code> ‚Äì integrity checks and batch verifications for medicines and removals</li>
                    <li><code>/blockchain</code> ‚Äì hash listings and on-chain verification helpers</li>
                    <li><code>/users</code> ‚Äì role lookup by wallet and current user info</li>
                </ul>
            </div>
        </div>

        <div class="subsection">
            <h3 class="subsection-title">Database (Prisma + PostgreSQL)</h3>
            <div class="steps">
                <ul>
                    <li>Models include: <code>users</code>, <code>medicine_records</code>, <code>medicine_stocks</code>, <code>stock_transactions</code>, <code>residents</code>, <code>medicine_releases</code>, <code>stock_removals</code>, <code>blockchain_transactions</code>, <code>sync_status</code>, <code>audit_log</code>, <code>barangay_health_centers</code>, <code>calendar_events</code>, <code>consultations</code>, <code>provider_availability</code>, <code>provider_specializations</code></li>
                    <li>Enums define roles, barangays, consultation types/status, center types</li>
                    <li>Relations capture who created/released/removed items and link records to residents</li>
                    <li>Blockchain linkage fields (<code>blockchain_hash</code>, <code>blockchain_tx_hash</code>) present on medicines, stocks, releases, removals, consultations</li>
                    <li>Indices support fast filtering by barangay, status, dates, and roles</li>
                </ul>
            </div>
        </div>

        <div class="subsection">
            <h3 class="subsection-title">Blockchain Integration</h3>
            <div class="steps">
                <ul>
                    <li>Smart contract <code>MedicineInventory</code> stores immutable hashes and emits events for store, update, delete</li>
                    <li>ABI loaded from <code>backend/abi/ContractABI.json</code>; network configured via <code>BLOCKCHAIN_RPC_URL</code> and <code>CONTRACT_ADDRESS</code></li>
                    <li>Hardhat config supports <code>localhost</code>, <code>mumbai</code>, <code>sepolia</code>, and <code>polygonAmoy</code></li>
                    <li>Backend uses <code>ethers</code> for JSON-RPC and contract calls; frontend uses <code>@thirdweb-dev/react</code> for wallet address and role binding</li>
                    <li>Verification endpoints compare database-computed hashes to on-chain values and report integrity</li>
                </ul>
            </div>
        </div>

        <div class="subsection">
            <h3 class="subsection-title">Frontend Components</h3>
            <div class="steps">
                <ul>
                    <li>Dashboards: Admin, Staff, Patient</li>
                    <li>Medicine: list, add/edit, stock add, releases, removals, histories</li>
                    <li>Residents: list, add, dashboard, profile modal</li>
                    <li>Consultation: booking page, calendar, statistics, provider management</li>
                    <li>Audit & Blockchain: audit logs, blockchain history, transaction history</li>
                    <li>Common: sidebar, navbar, protected routes, role provider</li>
                </ul>
            </div>
        </div>

        <div class="subsection">
            <h3 class="subsection-title">Styling and UX</h3>
            <div class="steps">
                <ul>
                    <li>Tailwind CSS configured via <code>tailwind.config.js</code>; utility-first styling across views</li>
                    <li>Lucide and <code>react-icons</code> provide iconography; consistent card and table patterns</li>
                    <li>Charts via <code>chart.js</code> and <code>react-chartjs-2</code> for statistics</li>
                    <li>PDF/CSV export for blockchain and audit datasets</li>
                </ul>
            </div>
        </div>

        <div class="subsection">
            <h3 class="subsection-title">Libraries and Tools</h3>
            <div class="tech-grid">
                <div class="tech-card"><h3>Frontend</h3><ul>
                    <li>React 18, Vite</li>
                    <li>@thirdweb-dev/react, magic-sdk</li>
                    <li>axios, react-router-dom</li>
                    <li>chart.js, react-chartjs-2</li>
                    <li>ethers v5 (frontend), jsPDF, lucide-react</li>
                    <li>tailwindcss, postcss, autoprefixer</li>
                </ul></div>
                <div class="tech-card"><h3>Backend</h3><ul>
                    <li>Express 5, cors, body-parser</li>
                    <li>Prisma ORM, @prisma/client</li>
                    <li>ethers v6, node-cache</li>
                    <li>nodemailer, @sendgrid/mail</li>
                    <li>dotenv, hardhat, @openzeppelin/contracts</li>
                </ul></div>
            </div>
        </div>

        <div class="subsection">
            <h3 class="subsection-title">Simple Interaction Examples</h3>
            <div class="steps">
                <ol>
                    <li><strong>Add Medicine:</strong> Staff opens Add Medicine, submits form. Backend validates and creates <code>medicine_records</code>, computes hash, stores on-chain, saves <code>blockchain_hash</code>/<code>blockchain_tx_hash</code>, logs audit.</li>
                    <li><strong>Release to Resident:</strong> Staff selects receipt form, chooses stock batch and resident, submits. Backend creates <code>medicine_releases</code>, decrements stock via <code>stock_transactions</code>, stores receipt hash on-chain, emails confirmation if configured.</li>
                    <li><strong>Record Removal:</strong> Staff records expired or damaged stock. Backend writes <code>stock_removals</code>, generates and verifies hash with blockchain endpoints, updates audit logs.</li>
                    <li><strong>Book Consultation:</strong> Patient/staff schedules via calendar. Backend persists <code>consultations</code>, assigns provider availability, sends emails, supports status transitions and statistics views.</li>
                    <li><strong>Verify Integrity:</strong> User navigates to Blockchain History or calls <code>/verify</code> endpoints to compare database and on-chain hashes and export reports.</li>
                </ol>
            </div>
        </div>
        <div class="subsection">
            <h3 class="subsection-title">API Reference (Examples)</h3>
            <div class="steps">
                <ul>
                    <li>Base URL: <code>VITE_API_BASE_URL</code></li>
                    <li>Wallet header: <code>x-wallet-address: 0xYourWallet</code></li>
                </ul>
                <div class="info-box">
                    <strong>Note</strong>
                    Some endpoints apply barangay-based access. Admin and municipal staff can query other barangays; others are restricted to assigned barangay.
                </div>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Residents</h4>
                <ul>
                    <li><code>GET /residents</code> ‚Äì filters: <code>barangay</code>, <code>age_category</code>, <code>is_4ps_member</code>, <code>is_pregnant</code>, <code>search</code>, <code>page</code>, <code>limit</code></li>
                </ul>
                <pre class="env-vars"><code>curl -s "$BASE/residents?search=juan&amp;page=1&amp;limit=20" \
 -H "x-wallet-address: 0x123..."</code></pre>
                <ul>
                    <li><code>GET /residents/:id</code> ‚Äì includes recent consultations and releases</li>
                    <li><code>POST /residents</code> ‚Äì creates resident, duplicate check unless <code>skip_duplicate_check=true</code></li>
                </ul>
                <pre class="env-vars"><code>{
  "first_name": "Juan",
  "last_name": "Dela Cruz",
  "phone": "09123456789",
  "barangay": "MUNICIPAL",
  "age": 35,
  "gender": "MALE"
}</code></pre>
                <ul>
                    <li><code>PUT /residents/:id</code> ‚Äì updates resident; only admin/staff can change <code>barangay</code></li>
                    <li><code>DELETE /residents/:id</code> ‚Äì soft-deletes</li>
                    <li><code>POST /residents/check-duplicate</code> ‚Äì quick duplicate detection</li>
                    <li><code>GET /residents/export/all</code> ‚Äì optimized export</li>
                    <li><code>GET /residents/statistics</code>, <code>/residents/statistics/barangay/:barangay</code></li>
                    <li><code>GET /residents/compare/barangays</code> ‚Äì admin-only comparison</li>
                </ul>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Medicines</h4>
                <ul>
                    <li><code>GET /medicines</code> ‚Äì filters: <code>search</code>, <code>category</code>, <code>is_active</code>, <code>page</code>, <code>limit</code></li>
                    <li><code>GET /medicines/:id</code> ‚Äì with stocks, releases</li>
                    <li><code>POST /medicines</code> ‚Äì creates medicine and initial stock</li>
                </ul>
                <pre class="env-vars"><code>{
  "medicine_name": "Paracetamol",
  "batch_number": "B-2025-001",
  "quantity": 500,
  "expiry_date": "2026-06-30",
  "unit_cost": 2.5,
  "supplier_name": "ABC Pharma",
  "barangay": "MUNICIPAL"
}</code></pre>
                <ul>
                    <li><code>PATCH /medicines/:id</code> ‚Äì sets <code>blockchain_hash</code>, <code>blockchain_tx_hash</code></li>
                    <li><code>PUT /medicines/:id</code> ‚Äì full update with audit</li>
                    <li><code>DELETE /medicines/:id</code> ‚Äì soft-delete + blockchain delete and tx log</li>
                    <li><code>POST /medicines/:id/verify</code> ‚Äì integrity verification</li>
                    <li><code>GET /medicines/stats</code>, <code>/medicines/barangay/:barangay</code>, <code>/medicines/compare/barangays</code></li>
                </ul>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Blockchain</h4>
                <ul>
                    <li><code>GET /blockchain/hashes</code> ‚Äì aggregated hashes from DB with caching</li>
                    <li><code>POST /blockchain/verify</code> ‚Äì body: <code>{ recordId, type, hash }</code></li>
                </ul>
                <pre class="env-vars"><code>curl -s -X POST "$BASE/blockchain/verify" \
 -H "Content-Type: application/json" \
 -d '{"recordId": 123, "type": "medicine", "hash": "0xabc..."}'</code></pre>
                <ul>
                    <li><code>GET /blockchain/record/:type/:id</code> ‚Äì returns stored hash and metadata</li>
                    <li><code>GET /blockchain/stats</code> ‚Äì counts by entity type</li>
                    <li><code>POST /blockchain/invalidate-cache</code> ‚Äì refresh cached lists</li>
                </ul>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Provider Profiles</h4>
                <ul>
                    <li><code>GET /provider-profiles/:id/available-slots?date=YYYY-MM-DD</code></li>
                </ul>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Consultations</h4>
                <ul>
                    <li><code>GET /consultations/available-doctors</code>, <code>/consultations/available-nurses</code></li>
                    <li><code>GET /consultations/available-slots?date=YYYY-MM-DD&amp;doctor_id=ID</code></li>
                    <li><code>POST /consultations</code> ‚Äì schedules consultation and sends emails</li>
                </ul>
                <pre class="env-vars"><code>{
  "patient_name": "Maria Clara",
  "patient_phone": "09123456780",
  "patient_barangay": "MUNICIPAL",
  "chief_complaint": "Fever",
  "scheduled_date": "2025-12-20",
  "scheduled_time": "10:30 AM",
  "assigned_doctor_id": 7
}</code></pre>
                <ul>
                    <li><code>GET /consultations</code>, <code>GET /consultations/:id</code>, <code>GET /consultations/stats/summary</code></li>
                    <li><code>PUT /consultations/:id</code> ‚Äì updates status and sends confirmation/cancellation emails</li>
                </ul>
            </div>
        </div>
        <div class="subsection">
            <h3 class="subsection-title">Endpoint Specifications</h3>
            <div class="steps">
                <div class="info-box"><strong>Headers</strong> Include <code>x-wallet-address</code> for role-aware access. Some endpoints require admin/municipal roles to query other barangays.</div>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Residents</h4>
                <ul>
                    <li><strong>GET</strong> <code>/residents</code></li>
                    <li><strong>Query</strong> <code>barangay</code>, <code>age_category</code>, <code>is_4ps_member</code>, <code>is_pregnant</code>, <code>search</code>, <code>page</code>, <code>limit</code></li>
                    <li><strong>Response 200</strong> <code>{ success, data:[Resident], pagination:{ page, limit, total, totalPages }, barangay }</code></li>
                    <li><strong>Errors</strong> 504 timeout; 500 server error</li>
                </ul>

                <ul>
                    <li><strong>POST</strong> <code>/residents</code></li>
                    <li><strong>Body</strong> <code>{ first_name, last_name, phone?, barangay, age?, gender?, date_of_birth?, ... }</code></li>
                    <li><strong>Response 201</strong> <code>{ success, data: Resident, message }</code></li>
                    <li><strong>Errors</strong> 400 missing barangay; 409 duplicate found; 500 server error</li>
                </ul>

                <ul>
                    <li><strong>PUT</strong> <code>/residents/:id</code></li>
                    <li><strong>Body</strong> partial resident fields; admin/staff may change <code>barangay</code></li>
                    <li><strong>Response 200</strong> <code>{ success, data: Resident }</code></li>
                    <li><strong>Errors</strong> 404 not found; 403 access denied; 500 server error</li>
                </ul>

                <ul>
                    <li><strong>DELETE</strong> <code>/residents/:id</code></li>
                    <li><strong>Response 200</strong> <code>{ success, message }</code></li>
                    <li><strong>Errors</strong> 404 not found; 403 access denied; 500 server error</li>
                </ul>

                <ul>
                    <li><strong>POST</strong> <code>/residents/check-duplicate</code></li>
                    <li><strong>Body</strong> <code>{ first_name, last_name, middle_name?, date_of_birth? }</code></li>
                    <li><strong>Response 200</strong> <code>{ success, duplicateFound, count?, duplicates? }</code></li>
                </ul>

                <ul>
                    <li><strong>GET</strong> <code>/residents/export/all</code></li>
                    <li><strong>Query</strong> <code>barangay?</code></li>
                    <li><strong>Response 200</strong> <code>{ success, data:[ResidentLite], count, barangay }</code></li>
                    <li><strong>Errors</strong> 500 export failed</li>
                </ul>

                <ul>
                    <li><strong>GET</strong> <code>/residents/statistics</code></li>
                    <li><strong>Response 200</strong> <code>{ success, stats:{ totals... }, barangay }</code></li>
                </ul>

                <ul>
                    <li><strong>GET</strong> <code>/residents/compare/barangays</code> (admin)</li>
                    <li><strong>Response 200</strong> <code>{ success, data:[{ barangay, total, fourPsMembers, pregnant, seniorCitizens, birthRegistered }] }</code></li>
                    <li><strong>Errors</strong> 403 access denied</li>
                </ul>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Medicines</h4>
                <ul>
                    <li><strong>GET</strong> <code>/medicines</code></li>
                    <li><strong>Query</strong> <code>search</code>, <code>category</code>, <code>is_active</code>, <code>page</code>, <code>limit</code></li>
                    <li><strong>Response 200</strong> <code>{ success, data:[MedicineWithStats], pagination, barangay, userRole }</code></li>
                </ul>

                <ul>
                    <li><strong>GET</strong> <code>/medicines/:id</code></li>
                    <li><strong>Response 200</strong> <code>{ success, data: Medicine{ stocks[], releases[] } }</code></li>
                    <li><strong>Errors</strong> 400 invalid id; 404 not found</li>
                </ul>

                <ul>
                    <li><strong>POST</strong> <code>/medicines</code></li>
                    <li><strong>Body</strong> <code>{ medicine_name, batch_number, quantity, expiry_date, unit_cost?, supplier_name?, barangay? }</code></li>
                    <li><strong>Response 201</strong> <code>{ success, medicine, stock, message }</code></li>
                    <li><strong>Errors</strong> 400 missing fields; 400 invalid quantity/expiry; 400 batch exists; 500 server error</li>
                </ul>

                <ul>
                    <li><strong>PATCH</strong> <code>/medicines/:id</code></li>
                    <li><strong>Body</strong> <code>{ blockchain_hash?, blockchain_tx_hash?, transaction_hash? }</code></li>
                    <li><strong>Response 200</strong> <code>{ success, medicine }</code></li>
                    <li><strong>Errors</strong> 404 not found; 403 access denied</li>
                </ul>

                <ul>
                    <li><strong>PUT</strong> <code>/medicines/:id</code></li>
                    <li><strong>Body</strong> core medicine fields; admin/staff may change <code>barangay</code></li>
                    <li><strong>Response 200</strong> <code>{ success, medicine }</code> with audit log created</li>
                </ul>

                <ul>
                    <li><strong>DELETE</strong> <code>/medicines/:id</code></li>
                    <li><strong>Response 200</strong> <code>{ success, message, blockchain_tx_hash? }</code></li>
                    <li><strong>Errors</strong> 404 not found; 403 access denied; blockchain delete may fail silently</li>
                </ul>

                <ul>
                    <li><strong>POST</strong> <code>/medicines/:id/verify</code></li>
                    <li><strong>Response 200</strong> <code>{ verified, storedHash, reconstructedHash, data, barangay, message }</code></li>
                    <li><strong>Errors</strong> 400 missing hash/stock; 404 not found</li>
                </ul>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Blockchain</h4>
                <ul>
                    <li><strong>GET</strong> <code>/blockchain/hashes</code></li>
                    <li><strong>Response 200</strong> <code>{ success, hashes:[{ type, recordId, hash, addedBy, addedByName, timestamp, exists, txHash }], counts }</code></li>
                </ul>

                <ul>
                    <li><strong>POST</strong> <code>/blockchain/verify</code></li>
                    <li><strong>Body</strong> <code>{ recordId:number, type:"medicine|stock|receipt|removal", hash }</code></li>
                    <li><strong>Response 200</strong> <code>{ success, verified, databaseHash, providedHash, message }</code></li>
                    <li><strong>Errors</strong> 400 missing params; 400 invalid type; 200 not-exist/no-hash messages</li>
                </ul>

                <ul>
                    <li><strong>GET</strong> <code>/blockchain/record/:type/:id</code></li>
                    <li><strong>Response 200</strong> <code>{ success, data:{ type, recordId, hash, addedBy, timestamp, exists, txHash } }</code></li>
                    <li><strong>Errors</strong> 400 invalid type; 404 not found</li>
                </ul>

                <ul>
                    <li><strong>GET</strong> <code>/blockchain/stats</code></li>
                    <li><strong>Response 200</strong> <code>{ success, stats:{ medicineCount, stockCount, receiptCount, removalCount, totalRecords } }</code></li>
                </ul>

                <ul>
                    <li><strong>POST</strong> <code>/blockchain/invalidate-cache</code></li>
                    <li><strong>Response 200</strong> <code>{ success, message }</code></li>
                </ul>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Provider Profiles</h4>
                <ul>
                    <li><strong>GET</strong> <code>/provider-profiles/:id/available-slots</code></li>
                    <li><strong>Query</strong> <code>date</code></li>
                    <li><strong>Response 200</strong> <code>{ success, data:[{ time, available }], availability:{ day, start_time, end_time, break_time?, slot_duration, max_consultations } }</code></li>
                    <li><strong>Errors</strong> 400 invalid provider/date; 200 no availability</li>
                </ul>

                <h4 style="margin: 18px 0 8px; color:#1e40af;">Consultations</h4>
                <ul>
                    <li><strong>GET</strong> <code>/consultations/available-doctors</code> | <code>/consultations/available-nurses</code></li>
                    <li><strong>Response 200</strong> <code>{ success, data:[{ user_id, full_name, email, phone, assigned_barangay, provider_specializations[] }] }</code></li>
                </ul>

                <ul>
                    <li><strong>GET</strong> <code>/consultations/available-slots</code></li>
                    <li><strong>Query</strong> <code>date</code>, <code>doctor_id?</code>, <code>nurse_id?</code></li>
                    <li><strong>Response 200</strong> <code>{ success, data:[{ time, available }], date }</code></li>
                    <li><strong>Errors</strong> 400 missing date</li>
                </ul>

                    <ul>
                    <li><strong>POST</strong> <code>/consultations</code></li>
                    <li><strong>Body</strong> patient + scheduling fields</li>
                    <li><strong>Response 201</strong> <code>{ success, data: Consultation, resident:{ id, action, matchedBy, message }, message }</code></li>
                    <li><strong>Errors</strong> 400 missing required; 400 past time; 400 slot unavailable</li>
                </ul>

                <ul>
                    <li><strong>GET</strong> <code>/consultations</code> | <code>/consultations/:id</code> | <code>/consultations/stats/summary</code></li>
                    <li><strong>Response 200</strong> standard pagination for list; full details for single; stats summary counts</li>
                </ul>

                <ul>
                    <li><strong>PUT</strong> <code>/consultations/:id</code></li>
                    <li><strong>Body</strong> status, notes, diagnosis, prescription, follow-up fields</li>
                    <li><strong>Response 200</strong> <code>{ success, data: Consultation, message }</code> with emails on status change</li>
                    <li><strong>Errors</strong> 400 invalid id; 404 not found</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section" id="deployment">
        <h2 class="section-title">
            <span class="section-number">3</span>
            Deployment and Environment
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Deployment Targets</h3>
            <div class="steps">
                <ul>
                    <li><strong>Frontend:</strong> Netlify</li>
                    <li><strong>Backend API:</strong> Render.com</li>
                    <li><strong>Database:</strong> Supabase or Neon (PostgreSQL)</li>
                    <li><strong>Blockchain:</strong> Polygon Mumbai/Amoy Testnet</li>
                </ul>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Key Environment Variables</h3>
            
            <p style="margin-bottom: 15px;"><strong>Frontend Variables:</strong></p>
            <div class="env-vars">
<code>VITE_API_BASE_URL</code> - Backend API URL
<code>VITE_CONTRACT_ADDRESS</code> - Smart Contract Address
<code>VITE_BLOCKCHAIN_NETWORK</code> - Blockchain Network
            </div>
            
            <p style="margin: 20px 0 15px;"><strong>Backend Variables:</strong></p>
            <div class="env-vars">
<code>PORT</code> - Server Port
<code>DATABASE_URL</code> - PostgreSQL Connection String
<code>BLOCKCHAIN_NETWORK</code> - Network Name
<code>BLOCKCHAIN_RPC_URL</code> - RPC Endpoint
<code>BLOCKCHAIN_CONTRACT_ADDRESS</code> - Contract Address
<code>SMTP_*</code> - Email Configuration
            </div>
        </div>
        
        <div class="info-box">
            <strong>‚ö†Ô∏è Operational Notes</strong>
            Start backend before frontend. Verify health endpoints and logs. Use provided scripts for dev workflow, monitoring, and debugging.
        </div>
    </div>

    <div class="section" id="getting-started">
        <h2 class="section-title">
            <span class="section-number">4</span>
            Getting Started
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">System Access and Login</h3>
            <div class="steps">
                <ol>
                    <li>Open the application in your browser</li>
                    <li>Connect your wallet by clicking the "Connect Wallet" button in the top-right corner</li>
                    <li>The system will automatically detect your role (Admin, Staff, or Patient) and direct you to the appropriate dashboard</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="medicine">
        <h2 class="section-title">
            <span class="section-number">5</span>
            Medicine Management
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Adding New Medicine (Admin/Staff)</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Medicine" ‚Üí "Add Medicine" in the sidebar</li>
                    <li>Fill in the required fields:
                        <ul>
                            <li>Medicine Name</li>
                            <li>Description</li>
                            <li>Category</li>
                            <li>Quantity</li>
                            <li>Expiration Date</li>
                        </ul>
                    </li>
                    <li>Click "Add Medicine" to save the new medicine to the inventory</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Editing Medicine</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Medicine" ‚Üí "Medicine List"</li>
                    <li>Find the medicine you want to edit</li>
                    <li>Click the "Edit" button (pencil icon)</li>
                    <li>Update the necessary information</li>
                    <li>Click "Save Changes"</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Deleting Medicine</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Medicine" ‚Üí "Medicine List"</li>
                    <li>Find the medicine you want to delete</li>
                    <li>Click the "Delete" button (trash icon)</li>
                    <li>Confirm deletion in the popup dialog</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Releasing Medicine to Patients/Residents</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Medicine" ‚Üí "Release Medicine"</li>
                    <li>Select the medicine from the inventory dropdown</li>
                    <li>Enter the recipient's information:
                        <ul>
                            <li>Patient/Resident Name</li>
                            <li>ID Number (if applicable)</li>
                            <li>Barangay</li>
                        </ul>
                    </li>
                    <li>Specify the quantity to release</li>
                    <li>Add any special instructions or notes</li>
                    <li>Click "Release Medicine"</li>
                    <li>The system will generate a release receipt that can be printed</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Viewing Release History</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Medicine" ‚Üí "Release History"</li>
                    <li>View all medicine releases with details:
                        <ul>
                            <li>Date and time</li>
                            <li>Medicine name</li>
                            <li>Quantity released</li>
                            <li>Recipient information</li>
                            <li>Staff who processed the release</li>
                        </ul>
                    </li>
                    <li>Use filters to search by date range, medicine name, or recipient</li>
                    <li>Click on any release record to view complete details</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Editing a Release Record</h3>
            <div class="steps">
                <ol>
                    <li>In the "Release History" page, find the release you need to modify</li>
                    <li>Click the "Edit" button (pencil icon)</li>
                    <li>Update the necessary information</li>
                    <li>Provide a reason for the edit (required for audit trail)</li>
                    <li>Click "Save Changes"</li>
                    <li>The system will record both the original and updated information</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Cancelling a Release</h3>
            <div class="steps">
                <ol>
                    <li>In the "Release History" page, locate the release to cancel</li>
                    <li>Click the "Cancel" button</li>
                    <li>Provide a reason for cancellation</li>
                    <li>Click "Confirm Cancellation"</li>
                    <li>The medicine quantity will be returned to inventory</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="stock">
        <h2 class="section-title">
            <span class="section-number">6</span>
            Stock Management
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Adding New Stock</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Medicine" ‚Üí "Add Stock"</li>
                    <li>Select the medicine from the dropdown</li>
                    <li>Enter the following details:
                        <ul>
                            <li>Quantity to add</li>
                            <li>Batch number</li>
                            <li>Expiration date</li>
                            <li>Supplier information</li>
                            <li>Purchase date</li>
                            <li>Purchase price (if applicable)</li>
                        </ul>
                    </li>
                    <li>Upload supporting documents (optional)</li>
                    <li>Click "Add Stock"</li>
                    <li>The system will update the inventory and record the transaction</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Removing Stock</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Medicine" ‚Üí "Remove Stock"</li>
                    <li>Select the medicine from the dropdown</li>
                    <li>Enter the quantity to remove</li>
                    <li>Provide a reason for removal</li>
                    <li>Click "Remove Stock"</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Editing Stock Information</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Medicine" ‚Üí "Stock Transactions"</li>
                    <li>Find the stock addition record you need to modify</li>
                    <li>Click the "Edit" button</li>
                    <li>Update the necessary information</li>
                    <li>Provide a reason for the edit</li>
                    <li>Click "Save Changes"</li>
                    <li>The system will adjust inventory levels accordingly</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Deleting Stock Records</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Medicine" ‚Üí "Stock Transactions"</li>
                    <li>Locate the stock record to delete</li>
                    <li>Click the "Delete" button</li>
                    <li>Provide authorization (may require admin approval)</li>
                    <li>Confirm deletion</li>
                    <li>The system will adjust inventory and maintain an audit trail</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Stock Adjustments</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Medicine" ‚Üí "Stock Adjustment"</li>
                    <li>Select the medicine requiring adjustment</li>
                    <li>Enter the correct quantity</li>
                    <li>Provide a detailed reason for the adjustment</li>
                    <li>Click "Adjust Stock"</li>
                    <li>The system will update the inventory and log the adjustment</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Stock Alerts and Notifications</h3>
            <div class="steps">
                <ol>
                    <li>The system automatically monitors stock levels</li>
                    <li>Low stock alerts appear on the dashboard</li>
                    <li>Expiration date warnings are displayed for medicines nearing expiry</li>
                    <li>Configure alert thresholds in "Settings" ‚Üí "Inventory Alerts"</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="consultation">
        <h2 class="section-title">
            <span class="section-number">7</span>
            Consultation Booking and Scheduling
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Booking a Consultation (Patients)</h3>
            <div class="steps">
                <ol>
                    <li>From the Patient dashboard, click "Book Consultation"</li>
                    <li>Select your preferred healthcare provider</li>
                    <li>Choose an available date and time slot</li>
                    <li>Fill in your health concern details</li>
                    <li>Click "Book Appointment"</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Managing Consultations (Healthcare Providers)</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Consultations" ‚Üí "Calendar"</li>
                    <li>View all upcoming appointments</li>
                    <li>Click on an appointment to see details</li>
                    <li>Update appointment status (Confirmed, Completed, Cancelled)</li>
                    <li>Add consultation notes after the appointment</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Setting Availability (Healthcare Providers)</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Consultations" ‚Üí "My Schedule"</li>
                    <li>Select dates and times when you're available</li>
                    <li>Click "Save Schedule"</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="residents">
        <h2 class="section-title">
            <span class="section-number">8</span>
            Resident Management
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Adding New Residents</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Residents" ‚Üí "Add Resident"</li>
                    <li>Fill in the resident's personal information:
                        <ul>
                            <li>Full Name</li>
                            <li>Date of Birth</li>
                            <li>Gender</li>
                            <li>Contact Information</li>
                            <li>Barangay</li>
                        </ul>
                    </li>
                    <li>Click "Add Resident"</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Viewing and Editing Residents</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Residents" ‚Üí "Resident List"</li>
                    <li>Use the search function to find specific residents</li>
                    <li>Click on a resident to view their full profile</li>
                    <li>Click "Edit" to update their information</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="user-role">
        <h2 class="section-title">
            <span class="section-number">9</span>
            User Role Management (Admin Only)
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Adding Staff Members</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Admin Dashboard"</li>
                    <li>Scroll to the "Staff Members" section</li>
                    <li>Click "Add New Staff"</li>
                    <li>Enter the staff member's:
                        <ul>
                            <li>Wallet Address</li>
                            <li>Full Name</li>
                            <li>Email</li>
                            <li>Assigned Barangay</li>
                        </ul>
                    </li>
                    <li>Click "Add Staff Member"</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="barangay">
        <h2 class="section-title">
            <span class="section-number">10</span>
            Barangay-Specific Features
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Viewing Barangay Information</h3>
            <div class="steps">
                <ol>
                    <li>From the Patient dashboard, click on any barangay card</li>
                    <li>View detailed information about the selected barangay</li>
                    <li>See available healthcare services and providers</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Barangay Medicine List</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Barangay" ‚Üí "Medicine List"</li>
                    <li>View medicines available in your specific barangay</li>
                    <li>Check stock levels and availability</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="blockchain">
        <h2 class="section-title">
            <span class="section-number">11</span>
            Blockchain Integration Features
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Viewing Transaction History</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Blockchain" ‚Üí "Transactions"</li>
                    <li>View all medicine transactions recorded on the blockchain</li>
                    <li>Click on any transaction to see details</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Medicine Verification</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Blockchain" ‚Üí "Verify Medicine"</li>
                    <li>Enter the medicine ID or scan QR code</li>
                    <li>View the complete chain of custody for the medicine</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="reports">
        <h2 class="section-title">
            <span class="section-number">12</span>
            Reports and Analytics
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Generating Reports</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Reports" ‚Üí "Generate Report"</li>
                    <li>Select report type (Inventory, Consultations, etc.)</li>
                    <li>Choose date range</li>
                    <li>Click "Generate Report"</li>
                    <li>Download or print the generated report</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Viewing Analytics Dashboard</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Analytics"</li>
                    <li>View key metrics and statistics</li>
                    <li>Use filters to customize the data view</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="receipts">
        <h2 class="section-title">
            <span class="section-number">13</span>
            Receipts and Financial Records
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Adding Staff Receipts</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Receipts" ‚Üí "Add Staff Receipt"</li>
                    <li>Enter receipt details and save</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Viewing Receipts</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Receipts" ‚Üí "All Receipts"</li>
                    <li>Filter by date, staff, or barangay</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Transaction History</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Blockchain" ‚Üí "Transactions"</li>
                    <li>View stored hashes and status for receipts and removals</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="audit">
        <h2 class="section-title">
            <span class="section-number">14</span>
            Audit Logs
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Viewing Change History</h3>
            <div class="steps">
                <ol>
                    <li>Navigate to "Audit Logs"</li>
                    <li>See who changed what and when</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Filter Logs</h3>
            <div class="steps">
                <ol>
                    <li>Use filters by table (medicine, stock, residents) and date range</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="providers">
        <h2 class="section-title">
            <span class="section-number">15</span>
            Provider Profiles and Availability
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Manage Providers</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Consultations" ‚Üí "Providers"</li>
                    <li>Add/edit provider details (name, role, email)</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Set Availability</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Consultations" ‚Üí "My Schedule"</li>
                    <li>Configure available days and time slots</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="statistics">
        <h2 class="section-title">
            <span class="section-number">16</span>
            Resident Statistics Dashboard
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Overview</h3>
            <div class="steps">
                <ol>
                    <li>Open "Residents" ‚Üí "Dashboard"</li>
                    <li>View total residents, 4Ps members, pregnant, seniors, birth-registered counts per barangay</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Details Modal</h3>
            <div class="steps">
                <ol>
                    <li>Click a barangay card to see detailed stats in a modal</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="verification">
        <h2 class="section-title">
            <span class="section-number">17</span>
            Verification Tools
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Medicine Verification</h3>
            <div class="steps">
                <ol>
                    <li>Go to "Blockchain" ‚Üí "Verify Medicine"</li>
                    <li>Enter medicine ID to see chain of custody</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Stock Verification</h3>
            <div class="steps">
                <ol>
                    <li>Use "Verify Stock" to confirm stock hash on-chain</li>
                </ol>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Receipt and Removal Verification</h3>
            <div class="steps">
                <ol>
                    <li>Use "Verify Receipt/Removal" to check on-chain hashes</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="section" id="security">
        <h2 class="section-title">
            <span class="section-number">18</span>
            Security and Access Control
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Wallet-Based Authentication</h3>
            <div class="steps">
                <ul>
                    <li>System uses wallet address headers and optional signature verification</li>
                </ul>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Barangay Access Enforcement</h3>
            <div class="steps">
                <ul>
                    <li>Non-admin users are restricted to their assigned barangay</li>
                </ul>
            </div>
        </div>
        
        <div class="subsection">
            <h3 class="subsection-title">Role Requirements</h3>
            <div class="steps">
                <ul>
                    <li>Certain routes require ADMIN or MUNICIPAL_STAFF roles</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section" id="troubleshooting">
        <h2 class="section-title">
            <span class="section-number">19</span>
            Troubleshooting
        </h2>
        
        <div class="subsection">
            <h3 class="subsection-title">Common Issues and Solutions</h3>
            
            <div class="troubleshooting-item">
                <strong>Wallet Connection Issues</strong>
                Refresh the page and try connecting again
            </div>
            
            <div class="troubleshooting-item">
                <strong>Missing Permissions</strong>
                Contact your system administrator to verify your role
            </div>
            
            <div class="troubleshooting-item">
                <strong>Transaction Failures</strong>
                Check your wallet has sufficient funds for gas fees
            </div>
            
            <div class="troubleshooting-item">
                <strong>Data Not Loading</strong>
                Refresh the page or check your internet connection
            </div>
            
            <div class="troubleshooting-item">
                <strong>Contract Address Misconfigured</strong>
                Verify <code>VITE_CONTRACT_ADDRESS</code> and backend <code>BLOCKCHAIN_CONTRACT_ADDRESS</code>
            </div>
            
            <div class="troubleshooting-item">
                <strong>Backend/Frontend URL Mismatch</strong>
                Confirm <code>VITE_API_BASE_URL</code> matches backend <code>PORT</code> and host
            </div>
            
            <div class="troubleshooting-item">
                <strong>Email Notifications Not Received</strong>
                Check spam folder and SMTP settings in backend env
            </div>
        </div>
    </div>

    <div style="text-align: center; margin-top: 80px; padding: 40px; background: #f8fafc; border-radius: 12px;">
        <h3 style="color: #1e40af; margin-bottom: 10px;">GenLunaMedChain System</h3>
        <p style="color: #64748b; font-size: 14px;">Complete Documentation & User Guide</p>
        <p style="color: #94a3b8; font-size: 12px; margin-top: 20px;">¬© 2025 GenLunaMedChain. All rights reserved.</p>
    </div>

</body>
</html>
